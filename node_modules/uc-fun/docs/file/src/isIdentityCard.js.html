<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/isIdentityCard.js | uc-fun</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/jdc-fe/uc-fun"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getType">getType</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isBigger">isBigger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isIdentityCard">isIdentityCard</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isJsonString">isJsonString</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isPhoneNumber">isPhoneNumber</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-jsonParse">jsonParse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-linearScale">linearScale</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-nonEmptyArr">nonEmptyArr</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-range2Arr">range2Arr</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-reverseArr">reverseArr</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-sleep">sleep</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-stringEllipsis">stringEllipsis</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-stringRealLen">stringRealLen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-timeFormat">timeFormat</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-urlFormat">urlFormat</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-validFunc">validFunc</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/isIdentityCard.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * &#x5339;&#x914D;&#x6240;&#x6709;&#x8EAB;&#x4EFD;&#x8BC1;&#x53F7;
 * &#x8EAB;&#x4EFD;&#x8BC1;&#x6821;&#x9A8C;&#x7801;&#x8BA1;&#x7B97;&#x89C4;&#x5219; https://baike.baidu.com/item/%E8%BA%AB%E4%BB%BD%E8%AF%81%E6%A0%A1%E9%AA%8C%E7%A0%81/3800388
 * @param {Number|String}  number &#x8EAB;&#x4EFD;&#x8BC1;&#x53F7;
 * /d{8}(0\d|10|11|12)([0-2]\d|30|31)\d{3}$/ 15&#x4F4D;&#x8EAB;&#x4EFD;&#x8BC1;&#x53F7;
 * /^\d{6}(18|19|20)\d{2}(0\d|10|11|12)([0-2]\d|30|31)\d{3}[\dXx]$/ 18&#x4F4D;&#x8EAB;&#x4EFD;&#x8BC1;&#x53F7;
 *
 * @example https://any86.github.io/any-rule/ &#x5E38;&#x7528;&#x6B63;&#x5219;&#x5927;&#x5168;
 *  isIdentityCard(&apos;622001790122123&apos;)
 *  =&gt; true
 *
 *  isIdentityCard(610124199810283999)
 *  =&gt; true
 *
 *  isIdentityCard(&apos;34052419800101001X&apos;)
 *   =&gt; true
 */

export default number =&gt; {
  const strNumber = String(number);
  const regex = /\d{8}(0\d|10|11|12)([0-2]\d|30|31)\d{3}$|^\d{6}(18|19|20)\d{2}(0\d|10|11|12)([0-2]\d|30|31)\d{3}[\dXx]$/;
  const monthStartPos = strNumber.length === 15 ? 8 : 10;
  const year = Number(strNumber.slice(6, monthStartPos));
  const month = Number(strNumber.slice(monthStartPos, monthStartPos + 2));
  const day = Number(strNumber.slice(monthStartPos + 2, monthStartPos + 4));
  // &#x5224;&#x65AD;&#x95F0;&#x5E74;&#x4E0E;&#x5E73;&#x5E74;&#x7684;2&#x6708;&#x7279;&#x6B8A;&#x60C5;&#x51B5;
  if (year % 400 === 0 || (year % 4 === 0 &amp;&amp; year % 100 !== 0)) {
    if (month === 2 &amp;&amp; day &gt; 29) return false;
  } else if (month === 2 &amp;&amp; day &gt; 28) return false;

  // &#x9488;&#x5BF9;&#x957F;&#x5EA6;&#x4E3A;18&#x4F4D;&#x8EAB;&#x4EFD;&#x8BC1;&#x53F7;&#xFF0C;&#x9A8C;&#x8BC1;&#x8EAB;&#x4EFD;&#x8BC1;&#x6821;&#x9A8C;&#x7801;&#xFF08;&#x7B2C;18&#x4F4D;&#x4E3A;&#x6821;&#x9A8C;&#x7801;&#xFF09;
  if (regex.test(strNumber) &amp;&amp; strNumber.length === 18) {
    const coefficient = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];
    const remainderMatch = {
      0: &apos;1&apos;,
      1: &apos;0&apos;,
      2: &apos;X&apos;,
      3: &apos;9&apos;,
      4: &apos;8&apos;,
      5: &apos;7&apos;,
      6: &apos;6&apos;,
      7: &apos;5&apos;,
      8: &apos;4&apos;,
      9: &apos;3&apos;,
      10: &apos;2&apos;
    };
    let remainder = 0;
    coefficient.forEach((item, index) =&gt; {
      remainder += item * strNumber[index];
    });
    return remainderMatch[remainder % 11] === strNumber[17].toUpperCase();
  }

  return regex.test(strNumber);
};
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
